CREATE TABLE IF NOT EXISTS public.locacao
(
    id integer NOT NULL,
    pessoa_id integer NOT NULL,
    livro_id integer NOT NULL,
    data_locacao date,
    data_devolucao date,
    PRIMARY KEY (id)
);

CREATE SEQUENCE public.locacao_seq
    INCREMENT 1
    START 1
    MINVALUE 1
    MAXVALUE 999999;

ALTER TABLE public.locacao
    ALTER COLUMN id SET DEFAULT nextval('locacao_seq')::regclass;


ALTER TABLE public.locacao
    ADD CONSTRAINT locacao_pessoa_fk FOREIGN KEY (pessoa_id)
    REFERENCES public.pessoa (id)
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

ALTER TABLE public.locacao
    ADD CONSTRAINT locacao_livro_fk FOREIGN KEY (livro_id)
    REFERENCES public.livro (id)
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;